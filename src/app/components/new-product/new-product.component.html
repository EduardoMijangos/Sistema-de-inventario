<ion-content>
  <ion-header>
    <ion-toolbar>

      <ion-text class="ion-text-center" color="dark">
        <h3>      {{edit ? 'Editar Producto' : 'Nuevo Producto' }}</h3>
      </ion-text>

      <ion-buttons slot="end">
        <ion-button (click)="close()" fill="clear">
          <ion-icon  slot="icon-only" name="close"></ion-icon>
         </ion-button>
      </ion-buttons>

    </ion-toolbar>


  </ion-header>

  <ion-grid fixed>
    <form [formGroup]="formProduct"  (ngSubmit)="submit()">
    <ion-row>

      <ion-col size="2" offset="5" >
        <ion-img
         id="imgProd" #itemPicture (click)="imageProduct($event)" [src]="imgProduct">
        </ion-img>
      </ion-col>

      <ion-col size="12">
        <ion-label >Nombre</ion-label>
       <ion-input
          formControlName="name"
          fill="outline"
          placeholder=" Nombre de producto"></ion-input>
          <small *ngIf="validaCtrl('name')"
          style="color: red;"
          >
            El nombre es obligatorio </small>
      </ion-col>

    </ion-row>
    <ion-row>

      <ion-col size="12">
          <ion-label>Categoria</ion-label>
          <ion-select type="number" formControlName="category_id"
           [value]="categorias[0]?.id" placeholder="Selecciona una gategoria">
            <ion-select-option *ngFor="let cat of categorias" [value]="cat.id">
              {{cat.name}}
            </ion-select-option>

          </ion-select>
          <small *ngIf="validaCtrl('category_id')"
          style="color: red;"
          >
            Elije una categoria es obligatorio </small>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6">
        <ion-label >Precio</ion-label>
        <ion-input
        formControlName="price"
        type="number"
           fill="outline"
           placeholder=" Precio"></ion-input>
           <small *ngIf="validaCtrl('price')"
           style="color: red;"
           >
             El precio es obligatorio </small>
      </ion-col>
      <ion-col size="6">
        <ion-label >Stock</ion-label>
        <ion-input
        formControlName="stock"
        type="number"
           fill="outline"
           placeholder=" Stock"></ion-input>
           <small *ngIf="validaCtrl('stock')"
           style="color: red;"
           >
             El Stock es obligatorio </small>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-label >Precio venta</ion-label>
        <ion-input
          formControlName="price_sale"
          type="number"
           fill="outline"
           placeholder=" precio venta"></ion-input>
           <small *ngIf="validaCtrl('price_sale')"
           style="color: red;"
           >
             El precio de venta es obligatorio </small>
             <small *ngIf="validarPrecio()" style="color: red;"> El precio de venta debe de ser mayor</small>
      </ion-col>
      <ion-col size="6">
        <ion-button  expand="block" shape="round" (click)="addCaducidad()">
          {{caduca? 'Quitar caducidad': 'Agregar Caducidad'}}
        </ion-button>
        </ion-col>
        <ion-col size="6" *ngIf="caduca">
        <ion-label >Fecha de vencimiento</ion-label>
        <ion-input
        formControlName="expired"
        type="date"
           fill="outline"
           placeholder=" Vencimiento"></ion-input>
           <small *ngIf="validaExpired()" style="color: red;"> La fecha no debe de ser anterior</small>

      </ion-col>
    </ion-row>
    <ion-button type="submit" expand="block" (click)="addEditar()">
      {{edit ? 'Editar' : 'Guardar'}}
    </ion-button>
    

  </form>
  </ion-grid>



</ion-content>
